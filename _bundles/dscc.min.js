!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("dscc",[],t):"object"==typeof exports?exports.dscc=t():e.dscc=t()}(window,function(){return function(e){var t={};function n(R){if(t[R])return t[R].exports;var r=t[R]={i:R,l:!1,exports:{}};return e[R].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,R){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:R})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.ts")}({"./node_modules/querystringify/index.js":function(e,t,n){"use strict";var R=Object.prototype.hasOwnProperty;function r(e){return decodeURIComponent(e.replace(/\+/g," "))}t.stringify=function(e,t){t=t||"";var n=[];for(var r in"string"!=typeof t&&(t="?"),e)R.call(e,r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.length?t+n.join("&"):""},t.parse=function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,R={};t=n.exec(e);){var o=r(t[1]),C=r(t[2]);o in R||(R[o]=C)}return R}},"./node_modules/requires-port/index.js":function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},"./node_modules/url-parse/index.js":function(e,t,n){"use strict";(function(t){var R=n("./node_modules/requires-port/index.js"),r=n("./node_modules/querystringify/index.js"),o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,C=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,a=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],s={hash:1,query:1};function E(e){var n,R={},r=typeof(e=e||t.location||{});if("blob:"===e.protocol)R=new N(unescape(e.pathname),{});else if("string"===r)for(n in R=new N(e,{}),s)delete R[n];else if("object"===r){for(n in e)n in s||(R[n]=e[n]);void 0===R.slashes&&(R.slashes=C.test(e.href))}return R}function i(e){var t=o.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function N(e,t,n){if(!(this instanceof N))return new N(e,t,n);var o,C,s,u,c,_,l=a.slice(),U=typeof t,p=this,Y=0;for("object"!==U&&"string"!==U&&(n=t,t=null),n&&"function"!=typeof n&&(n=r.parse),t=E(t),o=!(C=i(e||"")).protocol&&!C.slashes,p.slashes=C.slashes||o&&t.slashes,p.protocol=C.protocol||t.protocol||"",e=C.rest,C.slashes||(l[2]=[/(.*)/,"pathname"]);Y<l.length;Y++)s=(u=l[Y])[0],_=u[1],s!=s?p[_]=e:"string"==typeof s?~(c=e.indexOf(s))&&("number"==typeof u[2]?(p[_]=e.slice(0,c),e=e.slice(c+u[2])):(p[_]=e.slice(c),e=e.slice(0,c))):(c=s.exec(e))&&(p[_]=c[1],e=e.slice(0,c.index)),p[_]=p[_]||o&&u[3]&&t[_]||"",u[4]&&(p[_]=p[_].toLowerCase());n&&(p.query=n(p.query)),o&&t.slashes&&"/"!==p.pathname.charAt(0)&&(""!==p.pathname||""!==t.pathname)&&(p.pathname=function(e,t){for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),R=n.length,r=n[R-1],o=!1,C=0;R--;)"."===n[R]?n.splice(R,1):".."===n[R]?(n.splice(R,1),C++):C&&(0===R&&(o=!0),n.splice(R,1),C--);return o&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}(p.pathname,t.pathname)),R(p.port,p.protocol)||(p.host=p.hostname,p.port=""),p.username=p.password="",p.auth&&(u=p.auth.split(":"),p.username=u[0]||"",p.password=u[1]||""),p.origin=p.protocol&&p.host&&"file:"!==p.protocol?p.protocol+"//"+p.host:"null",p.href=p.toString()}N.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||r.parse)(t)),o[e]=t;break;case"port":o[e]=t,R(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,/:\d+$/.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var C="pathname"===e?"/":"#";o[e]=t.charAt(0)!==C?C+t:t}else o[e]=t;break;default:o[e]=t}for(var s=0;s<a.length;s++){var E=a[s];E[4]&&(o[E[1]]=o[E[1]].toLowerCase())}return o.origin=o.protocol&&o.host&&"file:"!==o.protocol?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=r.stringify);var t,n=this,R=n.protocol;R&&":"!==R.charAt(R.length-1)&&(R+=":");var o=R+(n.slashes?"//":"");return n.username&&(o+=n.username,n.password&&(o+=":"+n.password),o+="@"),o+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}},N.extractProtocol=i,N.location=E,N.qs=r,e.exports=N}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"./src/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var R=n("./node_modules/url-parse/index.js"),r=n("./src/types.ts");!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./src/types.ts")),t.getWidth=function(){return document.body.clientWidth},t.getHeight=function(){return document.documentElement.clientHeight};var o=function(){return R(window.parent.location.href,!0).query.componentId};t.parseImage=function(e){var t=e.split("  "),n=t[0],R=t[1];return{altText:t[2],originalUrl:n,proxiedUrl:R}},t.fieldsById=function(e){return e.fields.reduce(function(e,t){return e[t.id]=t,e},{})};var C=function(e,t){return e.length<t.length?e.map(function(e,n){return[e,t[n]]}):t.map(function(t,n){return[e[n],t]})},a=function(e,n,R,o){var a=function(e,n,R){return C(R,n).reduce(function(n,R){var o=R[0],C=R[1],a=e[o].type===r.FieldType.IMAGE?t.parseImage(C):C;return n[o]=a,n},{})}(n,o,R);return e.config.data.reduce(function(e,t){return e.concat(t.elements)},[]).filter(s).reduce(function(e,t){var n=t.value.map(function(e){return a[e]});return e[t.id]=n,e},{})},s=function(e){return e.type===r.ConfigDataElementType.DIMENSION||e.type===r.ConfigDataElementType.METRIC};t.rowsByConfigId=function(e){var n,R,o=t.fieldsById(e);(n={})[r.TableType.COMPARISON]=[],n[r.TableType.DEFAULT]=[],n[r.TableType.SUMMARY]=[];return e.dataResponse.tables.reduce(function(t,n){var R=n.rows.map(function(t){return a(e,o,n.fields,t)});return t[n.id]=R,t},((R={})[r.TableType.COMPARISON]=[],R[r.TableType.DEFAULT]=[],R[r.TableType.SUMMARY]=[],R))},t.subscribeToDataLegacy=function(e){var t=function(t){t.data.type===r.MessageType.RENDER?e(t.data):console.error("MessageType: "+t.data.type+" is not supported by this version of the library.")};window.addEventListener("message",t);var n=o();return window.parent.postMessage({componentId:n,type:"vizReady"},"*"),function(){return window.removeEventListener("message",t)}},t.flattenConfigIdsViaWonkyReduce=function(e){return e.config.data.reduce(function(e,t){return e.concat(t.elements.reduce(function(e,t){return e.concat(t.value.map(function(){return t.id}))},[]))},[])},t.objectFormatTable=function(e){var n,R,o=t.flattenConfigIdsViaWonkyReduce(e);t.fieldsById(e),(n={})[r.TableType.COMPARISON]=[],n[r.TableType.DEFAULT]=[],n[r.TableType.SUMMARY]=[];return e.dataResponse.tables.reduce(function(e,t){var n=[];return t.rows.forEach(function(e){var t=C(e,o).reduce(function(e,t){var n=t[0],R=t[1];return e[R]?e[R].push(n):e[R]=[n],e},{});n.push(t)}),e[t.id]=n,e},((R={})[r.TableType.COMPARISON]=[],R[r.TableType.DEFAULT]=[],R[r.TableType.SUMMARY]=[],R))},t.tableFormatTable=function(e){var n,R,o=t.flattenConfigIdsViaWonkyReduce(e);t.fieldsById(e),(n={})[r.TableType.COMPARISON]=[],n[r.TableType.DEFAULT]=[],n[r.TableType.SUMMARY]=[];return e.dataResponse.tables.reduce(function(e,t){var n=[o].concat(t.rows);return e[t.id]=n,e},((R={})[r.TableType.COMPARISON]=[],R[r.TableType.DEFAULT]=[],R[r.TableType.SUMMARY]=[],R))},t.fieldsByConfigId=function(e){var n=t.fieldsById(e);return e.config.data.reduce(function(e,t){var R=t.elements.reduce(function(e,t){return e[t.id]=t.value.map(function(e){return n[e]}),e},{});return Object.assign({},e,R)},{})};var E=function(e){var t={};return(e.config.style||[]).forEach(function(e){e.elements.forEach(function(e){t[e.id]={value:e.value,defaultValue:e.defaultValue}})},{}),t};t.tableTransform=function(e){return{tables:t.tableFormatTable(e),fields:t.fieldsByConfigId(e),style:E(e)}},t.objectTransform=function(e){return{tables:t.objectFormatTable(e),fields:t.fieldsByConfigId(e),style:E(e)}},t.subscribeToData=function(e,t){var n=function(n){n.data.type===r.MessageType.RENDER?e(t.transform(n.data)):console.error("MessageType: "+n.data.type+" is not supported by this version of the library.")};window.addEventListener("message",n);var R=o();return window.parent.postMessage({componentId:R,type:"vizReady"},"*"),function(){return window.removeEventListener("message",n)}}},"./src/types.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.METRIC="METRIC",e.DIMENSION="DIMENSION"}(t.ConceptType||(t.ConceptType={})),function(e){e.RENDER="RENDER"}(t.MessageType||(t.MessageType={})),function(e){e.YEAR="YEAR",e.YEAR_QUARTER="YEAR_QUARTER",e.YEAR_MONTH="YEAR_MONTH",e.YEAR_WEEK="YEAR_WEEK",e.YEAR_MONTH_DAY="YEAR_MONTH_DAY",e.YEAR_MONTH_DAY_HOUR="YEAR_MONTH_DAY_HOUR",e.QUARTER="QUARTER",e.MONTH="MONTH",e.WEEK="WEEK",e.MONTH_DAY="MONTH_DAY",e.DAY_OF_WEEK="DAY_OF_WEEK",e.DAY="DAY",e.HOUR="HOUR",e.MINUTE="MINUTE",e.DURATION="DURATION",e.COUNTRY="COUNTRY",e.COUNTRY_CODE="COUNTRY_CODE",e.CONTINENT="CONTINENT",e.CONTINENT_CODE="CONTINENT_CODE",e.SUB_CONTINENT="SUB_CONTINENT",e.SUB_CONTINENT_CODE="SUB_CONTINENT_CODE",e.REGION="REGION",e.REGION_CODE="REGION_CODE",e.CITY="CITY",e.CITY_CODE="CITY_CODE",e.METRO_CODE="METRO_CODE",e.LATITUDE_LONGITUDE="LATITUDE_LONGITUDE",e.NUMBER="NUMBER",e.PERCENT="PERCENT",e.TEXT="TEXT",e.BOOLEAN="BOOLEAN",e.URL="URL",e.IMAGE="IMAGE",e.CURRENCY_AED="CURRENCY_AED",e.CURRENCY_ALL="CURRENCY_ALL",e.CURRENCY_ARS="CURRENCY_ARS",e.CURRENCY_AUD="CURRENCY_AUD",e.CURRENCY_BDT="CURRENCY_BDT",e.CURRENCY_BGN="CURRENCY_BGN",e.CURRENCY_BOB="CURRENCY_BOB",e.CURRENCY_BRL="CURRENCY_BRL",e.CURRENCY_CAD="CURRENCY_CAD",e.CURRENCY_CDF="CURRENCY_CDF",e.CURRENCY_CHF="CURRENCY_CHF",e.CURRENCY_CLP="CURRENCY_CLP",e.CURRENCY_CNY="CURRENCY_CNY",e.CURRENCY_COP="CURRENCY_COP",e.CURRENCY_CRC="CURRENCY_CRC",e.CURRENCY_CZK="CURRENCY_CZK",e.CURRENCY_DKK="CURRENCY_DKK",e.CURRENCY_DOP="CURRENCY_DOP",e.CURRENCY_EGP="CURRENCY_EGP",e.CURRENCY_ETB="CURRENCY_ETB",e.CURRENCY_EUR="CURRENCY_EUR",e.CURRENCY_GBP="CURRENCY_GBP",e.CURRENCY_HKD="CURRENCY_HKD",e.CURRENCY_HRK="CURRENCY_HRK",e.CURRENCY_HUF="CURRENCY_HUF",e.CURRENCY_IDR="CURRENCY_IDR",e.CURRENCY_ILS="CURRENCY_ILS",e.CURRENCY_INR="CURRENCY_INR",e.CURRENCY_IRR="CURRENCY_IRR",e.CURRENCY_ISK="CURRENCY_ISK",e.CURRENCY_JMD="CURRENCY_JMD",e.CURRENCY_JPY="CURRENCY_JPY",e.CURRENCY_KRW="CURRENCY_KRW",e.CURRENCY_LKR="CURRENCY_LKR",e.CURRENCY_LTL="CURRENCY_LTL",e.CURRENCY_MNT="CURRENCY_MNT",e.CURRENCY_MVR="CURRENCY_MVR",e.CURRENCY_MXN="CURRENCY_MXN",e.CURRENCY_MYR="CURRENCY_MYR",e.CURRENCY_NOK="CURRENCY_NOK",e.CURRENCY_NZD="CURRENCY_NZD",e.CURRENCY_PAB="CURRENCY_PAB",e.CURRENCY_PEN="CURRENCY_PEN",e.CURRENCY_PHP="CURRENCY_PHP",e.CURRENCY_PKR="CURRENCY_PKR",e.CURRENCY_PLN="CURRENCY_PLN",e.CURRENCY_RON="CURRENCY_RON",e.CURRENCY_RSD="CURRENCY_RSD",e.CURRENCY_RUB="CURRENCY_RUB",e.CURRENCY_SAR="CURRENCY_SAR",e.CURRENCY_SEK="CURRENCY_SEK",e.CURRENCY_SGD="CURRENCY_SGD",e.CURRENCY_THB="CURRENCY_THB",e.CURRENCY_TRY="CURRENCY_TRY",e.CURRENCY_TWD="CURRENCY_TWD",e.CURRENCY_TZS="CURRENCY_TZS",e.CURRENCY_UAH="CURRENCY_UAH",e.CURRENCY_USD="CURRENCY_USD",e.CURRENCY_UYU="CURRENCY_UYU",e.CURRENCY_VEF="CURRENCY_VEF",e.CURRENCY_VND="CURRENCY_VND",e.CURRENCY_YER="CURRENCY_YER",e.CURRENCY_ZAR="CURRENCY_ZAR"}(t.FieldType||(t.FieldType={})),function(e){e.DEFAULT="DEFAULT",e.COMPARISON="COMPARISON",e.SUMMARY="SUMMARY"}(t.TableType||(t.TableType={})),function(e){e[e.METRIC=2]="METRIC",e[e.DIMENSION=1]="DIMENSION",e.SORT="SORT",e[e.MAX_RESULTS=3]="MAX_RESULTS"}(t.ConfigDataElementType||(t.ConfigDataElementType={})),function(e){e[e.TEXTINPUT=1]="TEXTINPUT",e[e.SELECT_SINGLE=2]="SELECT_SINGLE",e[e.CHECKBOX=3]="CHECKBOX",e[e.FONT_COLOR=4]="FONT_COLOR",e[e.FONT_SIZE=5]="FONT_SIZE",e[e.FONT_FAMILY=6]="FONT_FAMILY",e[e.FILL_COLOR=7]="FILL_COLOR",e[e.BORDER_COLOR=8]="BORDER_COLOR",e[e.AXIS_COLOR=9]="AXIS_COLOR",e[e.GRID_COLOR=10]="GRID_COLOR",e[e.OPACITY=11]="OPACITY",e[e.LINE_WEIGHT=12]="LINE_WEIGHT",e[e.LINE_STYLE=13]="LINE_STYLE",e[e.BORDER_RADIUS=14]="BORDER_RADIUS",e[e.INTERVAL=15]="INTERVAL",e[e.SELECT_RADIO=16]="SELECT_RADIO"}(t.ConfigStyleElementType||(t.ConfigStyleElementType={}))}})});